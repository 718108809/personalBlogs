<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>前言 | 小江的网站</title>
    <meta name="description" content="个人博客网">
    <link rel="preload stylesheet" href="/personalBlogs/assets/style.a9bd9622.css" as="style">
    <script type="module" src="/personalBlogs/assets/app.98eb18df.js"></script>
    <link rel="preload" href="/personalBlogs/assets/inter-roman-latin.2ed14f66.woff2" as="font" type="font/woff2" crossorigin="">
  <link rel="modulepreload" href="/personalBlogs/assets/chunks/framework.255dec5c.js">
  <link rel="modulepreload" href="/personalBlogs/assets/chunks/theme.0f95c3ee.js">
  <link rel="modulepreload" href="/personalBlogs/assets/blogs_threejs实现简单全景看房demo😜.md.8b4f1ac4.lean.js">
  <link rel="icon" href="logo.png">
  <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-b2cf3e0b><!--[--><!--]--><!--[--><span tabindex="-1" data-v-c8616af1></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-c8616af1> Skip to content </a><!--]--><!----><header class="VPNav" data-v-b2cf3e0b data-v-7e5bc4a5><div class="VPNavBar has-sidebar" data-v-7e5bc4a5 data-v-1d30fa41><div class="container" data-v-1d30fa41><div class="title" data-v-1d30fa41><div class="VPNavBarTitle has-sidebar" data-v-1d30fa41 data-v-f4ef19a3><a class="title" href="/personalBlogs/" data-v-f4ef19a3><!--[--><!--]--><!--[--><img class="VPImage logo" src="/personalBlogs/logo.png" alt data-v-6db2186b><!--]--><!--[-->小江的网站<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-1d30fa41><div class="curtain" data-v-1d30fa41></div><div class="content-body" data-v-1d30fa41><!--[--><!--]--><!----><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-1d30fa41 data-v-7f418b0f><span id="main-nav-aria-label" class="visually-hidden" data-v-7f418b0f>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/personalBlogs/blogs/" tabindex="0" data-v-7f418b0f data-v-37adc828 data-v-8f4dc553><!--[-->我的博客<!--]--><!----></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-1d30fa41 data-v-f6a63727><label title="toggle dark mode" data-v-f6a63727 data-v-a9c8afb8><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-checked="false" data-v-a9c8afb8 data-v-f3c41672><span class="check" data-v-f3c41672><span class="icon" data-v-f3c41672><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-a9c8afb8><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-a9c8afb8><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></label></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-1d30fa41 data-v-0394ad82 data-v-f6988cfb><!--[--><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-1d30fa41 data-v-40855f84 data-v-764effdf><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-764effdf><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-764effdf><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-764effdf><div class="VPMenu" data-v-764effdf data-v-e7ea1737><!----><!--[--><!--[--><!----><div class="group" data-v-40855f84><div class="item appearance" data-v-40855f84><p class="label" data-v-40855f84>Appearance</p><div class="appearance-action" data-v-40855f84><label title="toggle dark mode" data-v-40855f84 data-v-a9c8afb8><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-checked="false" data-v-a9c8afb8 data-v-f3c41672><span class="check" data-v-f3c41672><span class="icon" data-v-f3c41672><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-a9c8afb8><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-a9c8afb8><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></label></div></div></div><div class="group" data-v-40855f84><div class="item social-links" data-v-40855f84><div class="VPSocialLinks social-links-list" data-v-40855f84 data-v-f6988cfb><!--[--><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-1d30fa41 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav" data-v-b2cf3e0b data-v-f5a2ca58><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-f5a2ca58><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-f5a2ca58><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-f5a2ca58>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-f5a2ca58 data-v-079b16a8><button data-v-079b16a8>Return to top</button><!----></div></div><aside class="VPSidebar" data-v-b2cf3e0b data-v-139a1f1d><div class="curtain" data-v-139a1f1d></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-139a1f1d><span class="visually-hidden" id="sidebar-aria-label" data-v-139a1f1d> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-139a1f1d><section class="VPSidebarItem level-0 has-active" data-v-139a1f1d data-v-c4656e6d><div class="item" role="button" tabindex="0" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><h2 class="text" data-v-c4656e6d>博客目录</h2><!----></div><div class="items" data-v-c4656e6d><!--[--><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>概述</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/%E9%80%92%E5%BD%92%E6%9F%A5%E8%AF%A2name.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>递归查询name</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/%E6%9F%A5%E8%AF%A2%E5%9C%BA%E6%99%AF%E4%B8%AD%E6%A8%A1%E5%9E%8B%E6%95%B0%E6%8D%AE.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>查询场景中模型数据</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/%E5%88%9D%E5%A7%8B%E5%8C%96%E6%A8%A1%E5%9E%8B%E8%A7%86%E8%A7%92.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>初始化模型视角</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/%E6%A8%A1%E5%9E%8B%E7%82%B9%E5%87%BB%E9%AB%98%E4%BA%AE%E6%95%88%E6%9E%9C.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>模型点击高亮效果</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/%E6%A8%A1%E5%9E%8B%E5%AE%9A%E4%BD%8D%E8%81%9A%E7%84%A6.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>模型定位聚焦</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/%E9%80%9A%E8%BF%87%E4%BC%A0%E5%85%A5%E5%8F%82%E6%95%B0%E7%94%9F%E6%88%90%E7%9B%B4%E7%BA%BF+%E6%9B%B2%E7%BA%BF%E7%9A%84%E8%B7%AF%E5%BE%84.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>通过传入参数生成直线</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/%E9%80%9A%E8%BF%87three.path%E7%94%9F%E6%88%90%E6%B5%81%E5%8A%A8%E7%9A%84%E7%AE%AD%E5%A4%B4%E5%AE%9E%E7%8E%B0%E5%85%89%E8%B7%AF%E6%95%88%E6%9E%9C.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>通过three.path生成流动的箭头实现光路效果</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/%E5%BC%82%E6%AD%A5%E5%B9%B6%E5%8F%91%E7%94%9F%E6%88%90%E6%A0%87%E7%AD%BE.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>异步并发生成标签</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/git%E5%8D%8F%E5%90%8C%E5%BC%80%E5%8F%91.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>git协同开发</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/Map%E5%AF%B9%E8%B1%A1%E8%AF%A6%E8%A7%A3.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>Map对象详解</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/Vue%E4%B8%AD%E7%9A%84v-slot%E8%AF%A6%E8%A7%A3%EF%BC%8C%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%8F%92%E6%A7%BD%E5%92%8C%E5%85%B7%E5%90%8D%E6%8F%92%E6%A7%BD.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>Vue中的v-slot详解，作用域插槽和具名插槽</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/NProgress%E6%98%AF%E4%BB%80%E4%B9%88.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>NProgress是什么</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/Vue%E7%BB%84%E4%BB%B6%E4%B8%ADname%E7%9A%84%E4%B8%89%E5%A4%A7%E4%BD%9C%E7%94%A8.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>Vue组件中name的三大作用</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/%E4%BD%BF%E7%94%A8%20vue-router%EF%BC%8C%E9%A1%B5%E9%9D%A2%E5%8A%A0%E8%BD%BD%E5%AE%8C%E6%88%90%E5%90%8E%EF%BC%8C$route%20%E7%9A%84%E5%80%BC%E4%B8%8D%E6%AD%A3%E7%A1%AE.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>使用 vue-router，页面加载完成后，$route 的值不正确</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/new%20Set()%E7%9A%84%E5%9F%BA%E7%A1%80%E7%94%A8%E6%B3%95(ES6).html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>new Set()的基础用法(ES6)</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/JS%E4%B8%ADreduce%E7%9A%84%E7%94%A8%E6%B3%95.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>JS中reduce的用法</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/Promise.all.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>Promise.all</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/JavaScript%20Class%E7%B1%BB%E8%AF%A6%E8%A7%A3.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>JavaScript Class类详解</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/%E6%9C%89%E4%BA%86for%E5%BE%AA%E7%8E%AF%20%E4%B8%BA%E4%BB%80%E4%B9%88%E8%BF%98%E8%A6%81forEach%EF%BC%9F.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>有了for循环 为什么还要forEach？</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/tween.js%20%E4%B8%AD%E6%96%87%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>tween.js 中文使用指南</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/%E5%A4%A7%E5%B1%8F%E9%80%82%E9%85%8D%E6%96%B9%E6%A1%88%E6%B1%87%E6%80%BB.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>大屏适配方案汇总</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/%E5%88%9B%E5%BB%BA%E6%96%87%E6%9C%AC%E6%A0%87%E7%AD%BE.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>创建文本标签</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/%E5%B0%81%E8%A3%85websocket%E6%96%B9%E6%B3%95.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>封装websocket方法</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/%E5%89%8D%E7%AB%AF%E5%BC%82%E6%AD%A5(async)%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88(%E6%89%80%E6%9C%89%E6%96%B9%E6%A1%88).html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>前端异步(async)解决方案(所有方案)</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/%E5%85%B3%E4%BA%8Ethree.js%E6%B8%B2%E6%9F%93%E5%99%A8THREE.WebGLRenderer()%E5%8F%82%E6%95%B0%E7%9A%84%E4%BB%8B%E7%BB%8D%E5%92%8C%E4%BD%BF%E7%94%A8.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>关于three.js渲染器THREE.WebGLRenderer()参数的介绍和使用</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link is-active has-active" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/threejs%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8D%95%E5%85%A8%E6%99%AF%E7%9C%8B%E6%88%BFdemo%F0%9F%98%9C.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>threejs实现简单全景看房demo😜</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/ES6%20Module%20%E6%A8%A1%E5%9D%97.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>ES6 Module 模块</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/%E6%B5%8F%E8%A7%88%E5%99%A8%E7%9A%84%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>浏览器的垃圾回收机制</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/more.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>更多</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-b2cf3e0b data-v-a494bd1d><div class="VPDoc has-sidebar has-aside" data-v-a494bd1d data-v-c4b0d3cf><!--[--><!--]--><div class="container" data-v-c4b0d3cf><div class="aside" data-v-c4b0d3cf><div class="aside-curtain" data-v-c4b0d3cf></div><div class="aside-container" data-v-c4b0d3cf><div class="aside-content" data-v-c4b0d3cf><div class="VPDocAside" data-v-c4b0d3cf data-v-3f215769><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" data-v-3f215769 data-v-ff0f39c8><div class="content" data-v-ff0f39c8><div class="outline-marker" data-v-ff0f39c8></div><div class="outline-title" data-v-ff0f39c8>章节导航</div><nav aria-labelledby="doc-outline-aria-label" data-v-ff0f39c8><span class="visually-hidden" id="doc-outline-aria-label" data-v-ff0f39c8> Table of Contents for current page </span><ul class="root" data-v-ff0f39c8 data-v-8f12e865><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-c4b0d3cf><div class="content-container" data-v-c4b0d3cf><!--[--><!--]--><!----><main class="main" data-v-c4b0d3cf><div style="position:relative;" class="vp-doc _personalBlogs_blogs_threejs%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8D%95%E5%85%A8%E6%99%AF%E7%9C%8B%E6%88%BFdemo%F0%9F%98%9C" data-v-c4b0d3cf><div><p>各位大家好😊，最近一直在学习 <strong>threejs</strong> ，在学习过程中不断进步，在将来我会不断完善我的 <strong>threejs</strong> 案例库，希望能在学习路上帮到大家🌹</p><p>接下来为各位介绍的是一个全景看房的demo，我们先上地址：</p><ul><li>源码地址：<a href="https://github.com/ljnMeow/360-house-viewing.git" title="https://github.com/ljnMeow/360-house-viewing.git" target="_blank" rel="noreferrer">github.com/ljnMeow/360…</a></li><li>预览地址：<a href="https://ljnmeow.github.io/360-house-viewing/dist" title="https://ljnmeow.github.io/360-house-viewing/dist" target="_blank" rel="noreferrer">ljnmeow.github.io/360-house-v…</a></li><li>全景图切割工具：<a href="https://matheowis.github.io/HDRI-to-CubeMap/" title="https://matheowis.github.io/HDRI-to-CubeMap/" target="_blank" rel="noreferrer">matheowis.github.io/HDRI-to-Cub…</a></li></ul><h1 id="前言" tabindex="-1">前言 <a class="header-anchor" href="#前言" aria-label="Permalink to &quot;前言&quot;">​</a></h1><p><strong>threejs</strong> 是 <strong>javascript</strong> 编写的一个 <strong>WebGL</strong> 第三方库。在 <strong>threejs</strong> 中，我们通过 <strong>Scene(场景)</strong> 、 <strong>Camera(相机)</strong> 和 <strong>Renderer(渲染器)</strong> 来实现一个3d的场景，然后往里面添加各种光源、物体等等，形成一个3d世界。</p><h2 id="threejs支持程度" tabindex="-1">threejs支持程度 <a class="header-anchor" href="#threejs支持程度" aria-label="Permalink to &quot;threejs支持程度&quot;">​</a></h2><p>因为 <strong>threejs</strong> 是基于 <strong>webgl</strong> 写的，所以我们主要看设备是否支持 <strong>webgl</strong> 。据我所知目前主流最新版本的设备、浏览器都支持 <strong>webgl</strong>，但如果客服要在一些早期的设备上跑，例如某些超大屏大屏监控系统，跑这个的设备可能是早期的 <strong>IE</strong> 并且无法升级。我们还是需要权衡下早期 <strong>IE</strong> 和 安卓、苹果设备是否支持 <strong>webgl</strong>， 详情可见下图：</p><p><img src="/personalBlogs/assets/1701084125709.5dd3f960.png" alt="1701084125709"></p><h1 id="基本介绍" tabindex="-1">基本介绍 <a class="header-anchor" href="#基本介绍" aria-label="Permalink to &quot;基本介绍&quot;">​</a></h1><p>要实现3d图形的展示，大致是以下思路：</p><ul><li>创建三维场景(Scene)</li><li>选择视觉点并确认视觉位置角度(Camera)</li><li>添加物体供观察</li><li>渲染场景(Renderer)</li></ul><h2 id="scene" tabindex="-1">Scene <a class="header-anchor" href="#scene" aria-label="Permalink to &quot;Scene&quot;">​</a></h2><p>场景是我们所有物体的容器，通俗来讲就相当于我们的世界</p><h2 id="camera" tabindex="-1">Camera <a class="header-anchor" href="#camera" aria-label="Permalink to &quot;Camera&quot;">​</a></h2><p>相机是我们这个世界的观察者，使用右手坐标系定位</p><p><img src="/personalBlogs/assets/1701084131697.e335eb38.png" alt="1701084131697"></p><p><strong>threejs</strong> 常用的相机有两种，分别是 <strong>正交投影相机(OrthographicCamera)</strong> 和 <strong>透视投影相机(PerspectiveCamera)</strong> ，下面是我对这两种方式的理解，错了请各位大佬指点我一下🤞</p><h3 id="正交投影相机-orthographiccamera" tabindex="-1">正交投影相机(OrthographicCamera) <a class="header-anchor" href="#正交投影相机-orthographiccamera" aria-label="Permalink to &quot;正交投影相机(OrthographicCamera)&quot;">​</a></h3><p>正交投影是一种相对简单的投影模式，我们可以把该模式看作看作一个长方形矩形，总共有6个面。该模式的特点是无论出于矩形中的哪个位置，其投影的大小都是一样的，通俗理解就是该模式跟常生活中的视觉效果不一样。我们平时看物体是远小近大，而该模式下展示的物体无论物体距离相机距离远或者近，在最终渲染的图片中物体的大小都保持不变。通过下面图片能清楚看到，相机视觉中的物体投放到进平面，然后近平面中的物体渲染到远平面也就是屏幕中，并且无论投放在哪一面，物体的大小都不变。</p><p><img src="/personalBlogs/assets/1701084137922.885f3cfc.png" alt="1701084137922"></p><h3 id="透视投影相机-perspectivecamera" tabindex="-1">透视投影相机(PerspectiveCamera) <a class="header-anchor" href="#透视投影相机-perspectivecamera" aria-label="Permalink to &quot;透视投影相机(PerspectiveCamera)&quot;">​</a></h3><p>透视投影的视觉效果呈现一个锥形，该模式就是我们现实世界中的视觉体现。该模式的特点是物体远小近大。</p><p><img src="/personalBlogs/assets/1701084149433.e73a758c.png" alt="1701084149433"></p><p>相机效果体验地址在官方demo中有：<a href="https://threejs.org/examples/#webgl_camera" title="https://threejs.org/examples/#webgl_camera" target="_blank" rel="noreferrer">threejs.org/examples/#w…</a></p><h2 id="renderer" tabindex="-1">Renderer <a class="header-anchor" href="#renderer" aria-label="Permalink to &quot;Renderer&quot;">​</a></h2><p>渲染器渲染我们精心制作的场景</p><h1 id="进入正题" tabindex="-1">进入正题 <a class="header-anchor" href="#进入正题" aria-label="Permalink to &quot;进入正题&quot;">​</a></h1><p>根据我的了解目前常用于实现全景看房效果的有两种，分别是 <strong>天空盒(skyBox)</strong> 和 <strong>全景图片贴图</strong> ，我这个demo使用的是后者。</p><h2 id="实现方式" tabindex="-1">实现方式 <a class="header-anchor" href="#实现方式" aria-label="Permalink to &quot;实现方式&quot;">​</a></h2><h3 id="skybox" tabindex="-1">skyBox <a class="header-anchor" href="#skybox" aria-label="Permalink to &quot;skyBox&quot;">​</a></h3><p><strong>skyBox</strong> 方法是最容易理解的，在我们身处的场景内，无非就是6个面，上下、前后、左右。将这6个面的视觉处理成图片就得到6张不同方向视觉的图片。</p><p><img src="/personalBlogs/assets/1701084158329.9d78c7ef.png" alt="1701084158329"></p><p>我们将6个视觉的图片贴到立方体的6个面，可以得到一个房间。</p><div class="language-ini"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">initContent() {</span></span>
<span class="line"><span style="color:#A6ACCD;">  let </span><span style="color:#F07178;">picList</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">left</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">right</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">top</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">bottom</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">front</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">back</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">]</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  let </span><span style="color:#F07178;">boxGeometry</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> new THREE.BoxGeometry(10, 10, 10)</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  let </span><span style="color:#F07178;">boxMaterials</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> []</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  picList.forEach((item) =&gt; {</span></span>
<span class="line"><span style="color:#A6ACCD;">    let </span><span style="color:#F07178;">texture</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> new THREE.TextureLoader().load(</span></span>
<span class="line"><span style="color:#A6ACCD;">      require(`@/assets/image/${item}.png`)</span></span>
<span class="line"><span style="color:#A6ACCD;">    )</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    boxMaterials.push(new THREE.MeshBasicMaterial({ map: texture }))</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  })</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">this.box</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> new THREE.Mesh(boxGeometry, boxMaterials)</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  this.scene.add(this.box)</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">},</span></span></code></pre></div><p><img src="/personalBlogs/assets/1701084168554.e554723b.png" alt="1701084168554"></p><p>将视觉移到立方体中心，并让贴图内翻转一下，就能实现全景看房</p><div class="language-kotlin"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">this</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">box</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">geometry</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">scale</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">10</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">10</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">10</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><img src="/personalBlogs/assets/1701084174925.7bfb56a7.png" alt="1701084174925"></p><h3 id="全景图贴图" tabindex="-1">全景图贴图 <a class="header-anchor" href="#全景图贴图" aria-label="Permalink to &quot;全景图贴图&quot;">​</a></h3><p>全景图贴图这种方式我认为是简单而且效果最好的一种。写之前需要一张全景图片，这个用单反的全景模式就能拍一张</p><p><img src="/personalBlogs/assets/1701084180771.fdbaffce.png" alt="1701084180771"></p><p><strong>threejs</strong> 添加一个球体。并把全景图作为贴图贴到球体上，得到的效果如下：</p><div class="language-ini"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">initContent() {</span></span>
<span class="line"><span style="color:#A6ACCD;">  let </span><span style="color:#F07178;">sphereGeometry</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> new THREE.SphereGeometry(16, 50, 50)</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  let </span><span style="color:#F07178;">texture</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> new THREE.TextureLoader().load(require(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@/assets/image/livingRoom.jpg</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">))</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  let </span><span style="color:#F07178;">sphereMaterial</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> new THREE.MeshBasicMaterial({ map: texture })</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">this.sphere</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> new THREE.Mesh(sphereGeometry, sphereMaterial)</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  this.scene.add(this.sphere)</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">},</span></span></code></pre></div><p><img src="/personalBlogs/assets/1701084187986.f6210e74.png" alt="1701084187986"></p><p>同样，把视觉放球内，贴图反转。</p><div class="language-ini"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">sphereGeometry.scale(16, 16, -16)</span><span style="color:#676E95;font-style:italic;">;</span></span></code></pre></div><p><img src="/personalBlogs/assets/1701084194258.bb6fb559.png" alt="1701084194258"></p><h2 id="添加标签" tabindex="-1">添加标签 <a class="header-anchor" href="#添加标签" aria-label="Permalink to &quot;添加标签&quot;">​</a></h2><p>我们现在已经实现全景看房了，接下来给一些物体添加说明标签，我这边的标签分两种，一种点击能够进入下一个房间，一种是弹出信息框。先看效果：</p><p><img src="/personalBlogs/assets/1701084204394.37f7a0b7.png" alt="1701084204394"></p><p>下面看看我的数据结构</p><div class="language-less"><button title="Copy Code" class="copy"></button><span class="lang">less</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">dataList</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">image</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> require(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@/assets/image/livingRoom.jpg</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 场景贴图</span></span>
<span class="line"><span style="color:#A6ACCD;">        tipsList</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [ </span><span style="color:#676E95;font-style:italic;">// 标签数据</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#B2CCD6;">position</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#B2CCD6;">x</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">-200</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> y</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">-4</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> z</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">-147</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">},</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 标签位置</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#FFCB6B;">content</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 标签内容</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#FFCB6B;">title</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">进入厨房</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 标题</span></span>
<span class="line"><span style="color:#A6ACCD;">                    text</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 文本内容</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#FFCB6B;">image</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 场景贴图的下标，对应dataList下标</span></span>
<span class="line"><span style="color:#A6ACCD;">                    showTip</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> false</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 是否展示弹出框</span></span>
<span class="line"><span style="color:#A6ACCD;">                    showTitle</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 是否展示提示标题</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#B2CCD6;">position</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#B2CCD6;">x</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">-100</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> y</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> z</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">-231</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#FFCB6B;">content</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#FFCB6B;">title</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">信息点2</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                    text</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">77989</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                    showTip</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                    showTitle</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> false</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#B2CCD6;">position</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#B2CCD6;">x</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">150</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> y</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">-50</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> z</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">-198</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#FFCB6B;">content</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#FFCB6B;">title</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">信息点3</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                    text</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">qwdcz</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                    showTip</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                    showTitle</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> false</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#B2CCD6;">position</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#B2CCD6;">x</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">210</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> y</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">11</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> z</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">-140</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#FFCB6B;">content</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#FFCB6B;">title</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">信息点4</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                    text</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">大豆食心虫侦察十大大苏打大大大大大大大</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                    showTip</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                    showTitle</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> false</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#B2CCD6;">position</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#B2CCD6;">x</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">208</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> y</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">-12</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> z</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">140</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#FFCB6B;">content</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#FFCB6B;">title</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">信息点5</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                    text</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">eq</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                    showTip</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                    showTitle</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> false</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#B2CCD6;">position</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#B2CCD6;">x</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">86</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> y</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">-9</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> z</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">236</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#FFCB6B;">content</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#FFCB6B;">title</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">进入房间</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                    text</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                    showTip</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> false</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                    showTitle</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">        ]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">image</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> require(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@/assets/image/kitchen.jpg</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        tipsList</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#B2CCD6;">position</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#B2CCD6;">x</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">-199</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> y</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">-24</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> z</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">145</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#FFCB6B;">content</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#FFCB6B;">title</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">进入大厅</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                    text</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#FFCB6B;">image</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                    showTip</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> false</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                    showTitle</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">        ]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">,</span></span></code></pre></div><p>往场景中添加标签，得到如下效果。</p><div class="language-ini"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">addTipsSprite(</span><span style="color:#F07178;">index</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> 0) {</span></span>
<span class="line"><span style="color:#A6ACCD;">  let </span><span style="color:#F07178;">tipTexture</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> new THREE.TextureLoader().load(</span></span>
<span class="line"><span style="color:#A6ACCD;">    require(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@/assets/image/tip.png</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">  )</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  let </span><span style="color:#F07178;">material</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> new THREE.SpriteMaterial({ map: tipTexture })</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">this.tipsSpriteList</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> []</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  this.dataList[index].tipsList.forEach((item) =&gt; {</span></span>
<span class="line"><span style="color:#A6ACCD;">    let </span><span style="color:#F07178;">sprite</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> new THREE.Sprite(material)</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    sprite.scale.set(10, 10, 10)</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    sprite.position.set(item.position.x, item.position.y, item.position.z)</span><span style="color:#676E95;font-style:italic;">; // 设置标签位置</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">sprite.content</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> item.content</span><span style="color:#676E95;font-style:italic;">; // 设置标签内容</span></span>
<span class="line"><span style="color:#A6ACCD;">    this.tipsSpriteList.push(sprite)</span><span style="color:#676E95;font-style:italic;">; // 储存标签</span></span>
<span class="line"><span style="color:#A6ACCD;">    this.scene.add(sprite)</span><span style="color:#676E95;font-style:italic;">; // 添加到场景中</span></span>
<span class="line"><span style="color:#A6ACCD;">  })</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">},</span></span></code></pre></div><p><img src="/personalBlogs/assets/1701084218514.33ceaf4c.png" alt="1701084218514"></p><p>接下来实现鼠标移入，内容弹出效果</p><div class="language-ini"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">// html</span></span>
<span class="line"><span style="color:#A6ACCD;">&lt;div </span><span style="color:#F07178;">class</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">tooltip-box</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> :</span><span style="color:#F07178;">style</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">tooltipPosition</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">ref</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">tooltipBox</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  &lt;div </span><span style="color:#F07178;">class</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">container</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    &lt;div </span><span style="color:#F07178;">class</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">title</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">&gt;标题：{{ tooltopContent.title }}&lt;/div&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    &lt;div </span><span style="color:#F07178;">class</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">explain</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">&gt;说明：{{ tooltopContent.text }}&lt;/div&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  &lt;/div&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">&lt;/div&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">&lt;p </span><span style="color:#F07178;">class</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">title-text</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">ref</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">titleBox</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> :</span><span style="color:#F07178;">style</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">titlePosition</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  {{ tooltopContent.title }}</span></span>
<span class="line"><span style="color:#A6ACCD;">&lt;/p&gt;</span></span></code></pre></div><div class="language-css"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">// </span><span style="color:#FFCB6B;">data</span></span>
<span class="line"><span style="color:#A6ACCD;">tooltipPosition: </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> // 初始化位置全部在屏幕之外</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#B2CCD6;">top</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">-100%</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    left: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">-100%</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">titlePosition: </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#B2CCD6;">top</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">-100%</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    left: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">-100%</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">tooltopContent: </span><span style="color:#89DDFF;">{}</span><span style="color:#A6ACCD;">, // 展示的内容</span></span></code></pre></div><div class="language-ini"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">// method</span></span>
<span class="line"><span style="color:#A6ACCD;">onMousemove(e) {</span></span>
<span class="line"><span style="color:#A6ACCD;">  e.preventDefault()</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  let </span><span style="color:#F07178;">element</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> this.$refs.threeDBox</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  let </span><span style="color:#F07178;">raycaster</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> new THREE.Raycaster()</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  let </span><span style="color:#F07178;">mouse</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> new THREE.Vector2()</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  // 通过鼠标点击的位置计算出raycaster所需要的点的位置，以屏幕中心为原点，值的范围为-1到1.</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">mouse.x</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> (e.clientX / element.clientWidth) * 2 - 1</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">mouse.y</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> -(e.clientY / element.clientHeight) * 2 + 1</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  raycaster.setFromCamera(mouse, this.camera)</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  // 将标签精灵数据放进来做视线交互</span></span>
<span class="line"><span style="color:#A6ACCD;">  let </span><span style="color:#F07178;">intersects</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> raycaster.intersectObjects(this.tipsSpriteList, true)</span><span style="color:#676E95;font-style:italic;">; </span></span>
<span class="line"><span style="color:#A6ACCD;">  // 视线穿过集合选择最前面的一个</span></span>
<span class="line"><span style="color:#A6ACCD;">  if (intersects.length &gt; 0) {</span></span>
<span class="line"><span style="color:#A6ACCD;">    // 将标签的空间坐标转屏幕坐标，通过计算赋给元素的top、left</span></span>
<span class="line"><span style="color:#A6ACCD;">    let </span><span style="color:#F07178;">elementWidth</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> element.clientWidth / 2</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    let </span><span style="color:#F07178;">elementHeight</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> element.clientHeight / 2</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    let </span><span style="color:#F07178;">worldVector</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> new THREE.Vector3(</span></span>
<span class="line"><span style="color:#A6ACCD;">      intersects[0].object.position.x,</span></span>
<span class="line"><span style="color:#A6ACCD;">      intersects[0].object.position.y,</span></span>
<span class="line"><span style="color:#A6ACCD;">      intersects[0].object.position.z</span></span>
<span class="line"><span style="color:#A6ACCD;">    )</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    let </span><span style="color:#F07178;">position</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> worldVector.project(this.camera)</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">this.tooltopContent</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> intersects[0].object.content</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    if (intersects[0].object.content.showTip) {</span></span>
<span class="line"><span style="color:#A6ACCD;">      let </span><span style="color:#F07178;">left</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Math.round(</span></span>
<span class="line"><span style="color:#A6ACCD;">        elementWidth * position.x +</span></span>
<span class="line"><span style="color:#A6ACCD;">          elementWidth -</span></span>
<span class="line"><span style="color:#A6ACCD;">          this.$refs.tooltipBox.clientWidth / 2</span></span>
<span class="line"><span style="color:#A6ACCD;">      )</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">      let </span><span style="color:#F07178;">top</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Math.round(</span></span>
<span class="line"><span style="color:#A6ACCD;">        -elementHeight * position.y +</span></span>
<span class="line"><span style="color:#A6ACCD;">          elementHeight -</span></span>
<span class="line"><span style="color:#A6ACCD;">          this.$refs.tooltipBox.clientHeight / 2</span></span>
<span class="line"><span style="color:#A6ACCD;">      )</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">this.tooltipPosition</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;">        left: `${left}px`,</span></span>
<span class="line"><span style="color:#A6ACCD;">        top: `${top}px`,</span></span>
<span class="line"><span style="color:#A6ACCD;">      }</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    } else if (intersects[0].object.content.showTitle) {</span></span>
<span class="line"><span style="color:#A6ACCD;">      let </span><span style="color:#F07178;">left</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Math.round(</span></span>
<span class="line"><span style="color:#A6ACCD;">        elementWidth * position.x +</span></span>
<span class="line"><span style="color:#A6ACCD;">          elementWidth -</span></span>
<span class="line"><span style="color:#A6ACCD;">          this.$refs.titleBox.clientWidth / 2</span></span>
<span class="line"><span style="color:#A6ACCD;">      )</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">      let </span><span style="color:#F07178;">top</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Math.round(-elementHeight * position.y + elementHeight)</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">this.titlePosition</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;">        left: `${left}px`,</span></span>
<span class="line"><span style="color:#A6ACCD;">        top: `${top}px`,</span></span>
<span class="line"><span style="color:#A6ACCD;">      }</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;">  } else {</span></span>
<span class="line"><span style="color:#A6ACCD;">    // 鼠标移出去隐藏所有</span></span>
<span class="line"><span style="color:#A6ACCD;">    this.handleTooltipHide(e)</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"><span style="color:#A6ACCD;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">handleTooltipHide(e) {</span></span>
<span class="line"><span style="color:#A6ACCD;">  e.preventDefault()</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">this.tooltipPosition</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;">    top: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">-100%</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    left: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">-100%</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">this.titlePosition</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;">    top: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">-100%</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    left: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">-100%</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">this.tooltopContent</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> {}</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">},</span></span></code></pre></div><div class="language-kotlin"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// mounted</span></span>
<span class="line"><span style="color:#A6ACCD;">this</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">renderer</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">domElement</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">addEventListener</span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">mousemove</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  this</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">onMousemove</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">false</span></span>
<span class="line"><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">this</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">$refs</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">tooltipBox</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">addEventListener</span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">mouseleave</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  this</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">handleTooltipHide</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">false</span></span>
<span class="line"><span style="color:#89DDFF;">);</span></span></code></pre></div><p>最终得到效果：</p><p><img src="/personalBlogs/assets/1701084232591.23c6f35e.png" alt="1701084232591"></p><h2 id="场景切换" tabindex="-1">场景切换 <a class="header-anchor" href="#场景切换" aria-label="Permalink to &quot;场景切换&quot;">​</a></h2><p>全景看房总不能一直看一个房间，所以我们还需要实现点击切换场景功能。直接codeing...</p><div class="language-ini"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">changeContentAndtips(index) {</span></span>
<span class="line"><span style="color:#A6ACCD;">  // 清除场景数据内所有的精灵标签</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">this.scene.children</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> this.scene.children.filter(</span></span>
<span class="line"><span style="color:#A6ACCD;">    (item) =&gt; String(item.type) !== </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Sprite</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  )</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  // 储存数组置空</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">this.tipsSpriteList</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> []</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  // 重新加载贴图，这边应用gasp做一个简单的过渡动画，将透明度从0 ~ 1</span></span>
<span class="line"><span style="color:#A6ACCD;">  let </span><span style="color:#F07178;">texture</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> new THREE.TextureLoader().load(this.dataList[index].image)</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  let </span><span style="color:#F07178;">sphereMaterial</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> new THREE.MeshBasicMaterial({</span></span>
<span class="line"><span style="color:#A6ACCD;">    map: texture,</span></span>
<span class="line"><span style="color:#A6ACCD;">    transparent: true,</span></span>
<span class="line"><span style="color:#A6ACCD;">    opacity: 0,</span></span>
<span class="line"><span style="color:#A6ACCD;">  })</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">this.sphere.material</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> sphereMaterial</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  gsap.to(sphereMaterial, { transparent: true, opacity: 1, duration: 2 })</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  // 手动更新投影矩阵</span></span>
<span class="line"><span style="color:#A6ACCD;">  this.camera.updateProjectionMatrix()</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  // 添加当前场景标签</span></span>
<span class="line"><span style="color:#A6ACCD;">  this.addTipsSprite(index)</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">onMouseClick(e) {</span></span>
<span class="line"><span style="color:#A6ACCD;">  e.preventDefault()</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  let </span><span style="color:#F07178;">element</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> this.$refs.threeDBox</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  let </span><span style="color:#F07178;">raycaster</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> new THREE.Raycaster()</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  let </span><span style="color:#F07178;">mouse</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> new THREE.Vector2()</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">mouse.x</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> (e.clientX / element.clientWidth) * 2 - 1</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">mouse.y</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> -(e.clientY / element.clientHeight) * 2 + 1</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  raycaster.setFromCamera(mouse, this.camera)</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  let </span><span style="color:#F07178;">intersects</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> raycaster.intersectObjects(this.tipsSpriteList, true)</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  if (intersects.length &gt; 0 &amp;&amp; intersects[0].object.content.showTitle) {</span></span>
<span class="line"><span style="color:#A6ACCD;">    this.changeContentAndtips(intersects[0].object.content.image)</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    this.handleTooltipHide(e)</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"><span style="color:#A6ACCD;">},</span></span></code></pre></div><p>最终得到完整效果如下图：</p><p><img src="/personalBlogs/assets/1701084240467.6587020a.png" alt="1701084240467"></p><h1 id="总结" tabindex="-1">总结 <a class="header-anchor" href="#总结" aria-label="Permalink to &quot;总结&quot;">​</a></h1><p>在这个demo中有一些细节问题我处理的不是很好，例如加载时因为贴图加载慢黑屏(这是因为贴图太大，优化时可加入等待动画)，还有就是加载顺序没处理好，场景贴图还没加载完标签已经进来了。</p><p>在不断学习 <strong>threejs</strong> 的过程中，感觉还是挺有趣，看着别人炫酷的3D效果和智慧城市感觉好强，也感到自己的不足。趁着这段时间公司有项目需要用 <strong>threejs</strong> 能够光明正大摸鱼学习，努力冲啊💪</p></div></div></main><footer class="VPDocFooter" data-v-c4b0d3cf data-v-face870a><!--[--><!--]--><!----><div class="prev-next" data-v-face870a><div class="pager" data-v-face870a><a class="pager-link prev" href="/personalBlogs/blogs/%E5%85%B3%E4%BA%8Ethree.js%E6%B8%B2%E6%9F%93%E5%99%A8THREE.WebGLRenderer()%E5%8F%82%E6%95%B0%E7%9A%84%E4%BB%8B%E7%BB%8D%E5%92%8C%E4%BD%BF%E7%94%A8.html" data-v-face870a><span class="desc" data-v-face870a>←上一篇</span><span class="title" data-v-face870a>关于three.js渲染器THREE.WebGLRenderer()参数的介绍和使用</span></a></div><div class="has-prev pager" data-v-face870a><a class="pager-link next" href="/personalBlogs/blogs/ES6%20Module%20%E6%A8%A1%E5%9D%97.html" data-v-face870a><span class="desc" data-v-face870a>下一篇→</span><span class="title" data-v-face870a>ES6 Module 模块</span></a></div></div></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-b2cf3e0b data-v-2f86ebd2><div class="container" data-v-2f86ebd2><!----><p class="copyright" data-v-2f86ebd2>Copyright © 2023 JIANG</p></div></footer><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"blogs_promise.all.md\":\"594ffea2\",\"blogs_nprogress是什么.md\":\"e562c118\",\"blogs_more.md\":\"9a2706e7\",\"blogs_vue组件中name的三大作用.md\":\"94b1760a\",\"blogs_关于three.js渲染器three.webglrenderer()参数的介绍和使用.md\":\"d9af0403\",\"blogs_git协同开发.md\":\"be0b65b3\",\"blogs_index.md\":\"cd9b4dd0\",\"blogs_vue中的v-slot详解，作用域插槽和具名插槽.md\":\"9ed78544\",\"blogs_初始化模型视角.md\":\"7e8bb4e5\",\"blogs_threejs实现简单全景看房demo😜.md\":\"8b4f1ac4\",\"blogs_new set()的基础用法(es6).md\":\"7acbea17\",\"blogs_有了for循环 为什么还要foreach？.md\":\"9dd1d08b\",\"blogs_tween.js 中文使用指南.md\":\"835f0b0d\",\"blogs_递归查询name.md\":\"83fb1471\",\"blogs_js中reduce的用法.md\":\"6614fd96\",\"blogs_封装websocket方法.md\":\"3b820615\",\"blogs_创建文本标签.md\":\"347c44c2\",\"blogs_map对象详解.md\":\"3fef813d\",\"blogs_模型点击高亮效果.md\":\"df6368e5\",\"blogs_使用 vue-router，页面加载完成后，_route 的值不正确.md\":\"7cfa5e05\",\"blogs_es6 module 模块.md\":\"3c47d71b\",\"blogs_查询场景中模型数据.md\":\"d659c061\",\"blogs_大屏适配方案汇总.md\":\"08819943\",\"blogs_浏览器的垃圾回收机制.md\":\"beff4284\",\"blogs_异步并发生成标签.md\":\"2ccf6358\",\"blogs_开发规范初版.md\":\"3f538129\",\"blogs_模型定位聚焦.md\":\"db61e41d\",\"blogs_javascript class类详解.md\":\"5b5afbc3\",\"blogs_前端异步(async)解决方案(所有方案).md\":\"c08f3f4e\",\"index.md\":\"c36bb269\",\"blogs_通过传入参数生成直线_曲线的路径.md\":\"1ab13c17\",\"blogs_通过three.path生成流动的箭头实现光路效果.md\":\"0959eaf8\"}")
__VP_SITE_DATA__ = JSON.parse("{\"lang\":\"zh-CN\",\"dir\":\"ltr\",\"title\":\"小江的网站\",\"description\":\"个人博客网\",\"base\":\"/personalBlogs/\",\"head\":[],\"appearance\":true,\"themeConfig\":{\"logo\":\"logo.png\",\"siteTitle\":\"小江的网站\",\"smoothScroll\":true,\"socialLinks\":[],\"nav\":[{\"text\":\"我的博客\",\"link\":\"/blogs/\"}],\"sidebar\":{\"/blogs/\":[{\"text\":\"博客目录\",\"collapsible\":true,\"items\":[{\"text\":\"概述\",\"link\":\"/blogs/\"},{\"text\":\"递归查询name\",\"link\":\"/blogs/递归查询name\"},{\"text\":\"查询场景中模型数据\",\"link\":\"/blogs/查询场景中模型数据\"},{\"text\":\"初始化模型视角\",\"link\":\"/blogs/初始化模型视角\"},{\"text\":\"模型点击高亮效果\",\"link\":\"/blogs/模型点击高亮效果\"},{\"text\":\"模型定位聚焦\",\"link\":\"/blogs/模型定位聚焦\"},{\"text\":\"通过传入参数生成直线\",\"link\":\"/blogs/通过传入参数生成直线+曲线的路径\"},{\"text\":\"通过three.path生成流动的箭头实现光路效果\",\"link\":\"/blogs/通过three.path生成流动的箭头实现光路效果\"},{\"text\":\"异步并发生成标签\",\"link\":\"/blogs/异步并发生成标签\"},{\"text\":\"git协同开发\",\"link\":\"/blogs/git协同开发\"},{\"text\":\"Map对象详解\",\"link\":\"/blogs/Map对象详解\"},{\"text\":\"Vue中的v-slot详解，作用域插槽和具名插槽\",\"link\":\"/blogs/Vue中的v-slot详解，作用域插槽和具名插槽\"},{\"text\":\"NProgress是什么\",\"link\":\"/blogs/NProgress是什么\"},{\"text\":\"Vue组件中name的三大作用\",\"link\":\"/blogs/Vue组件中name的三大作用\"},{\"text\":\"使用 vue-router，页面加载完成后，$route 的值不正确\",\"link\":\"/blogs/使用 vue-router，页面加载完成后，$route 的值不正确\"},{\"text\":\"new Set()的基础用法(ES6)\",\"link\":\"/blogs/new Set()的基础用法(ES6)\"},{\"text\":\"JS中reduce的用法\",\"link\":\"/blogs/JS中reduce的用法\"},{\"text\":\"Promise.all\",\"link\":\"/blogs/Promise.all\"},{\"text\":\"JavaScript Class类详解\",\"link\":\"/blogs/JavaScript Class类详解\"},{\"text\":\"有了for循环 为什么还要forEach？\",\"link\":\"/blogs/有了for循环 为什么还要forEach？\"},{\"text\":\"tween.js 中文使用指南\",\"link\":\"/blogs/tween.js 中文使用指南\"},{\"text\":\"大屏适配方案汇总\",\"link\":\"/blogs/大屏适配方案汇总\"},{\"text\":\"创建文本标签\",\"link\":\"/blogs/创建文本标签\"},{\"text\":\"封装websocket方法\",\"link\":\"/blogs/封装websocket方法\"},{\"text\":\"前端异步(async)解决方案(所有方案)\",\"link\":\"/blogs/前端异步(async)解决方案(所有方案)\"},{\"text\":\"关于three.js渲染器THREE.WebGLRenderer()参数的介绍和使用\",\"link\":\"/blogs/关于three.js渲染器THREE.WebGLRenderer()参数的介绍和使用\"},{\"text\":\"threejs实现简单全景看房demo😜\",\"link\":\"/blogs/threejs实现简单全景看房demo😜\"},{\"text\":\"ES6 Module 模块\",\"link\":\"/blogs/ES6 Module 模块\"},{\"text\":\"浏览器的垃圾回收机制\",\"link\":\"/blogs/浏览器的垃圾回收机制\"},{\"text\":\"更多\",\"link\":\"/blogs/more\"}]}]},\"outline\":\"deep\",\"outlineTitle\":\"章节导航\",\"docFooter\":{\"prev\":\"←上一篇\",\"next\":\"下一篇→\"},\"lastUpdatedText\":\"上次更新时间\",\"footer\":{\"message\":\"\",\"copyright\":\"Copyright © 2023 JIANG\"}},\"locales\":{},\"scrollOffset\":90,\"cleanUrls\":false}")</script>
    
  </body>
</html>