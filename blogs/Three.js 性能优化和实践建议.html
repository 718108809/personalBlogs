<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>小江的网站 | 小江的网站</title>
    <meta name="description" content="个人博客网">
    <link rel="preload stylesheet" href="/personalBlogs/assets/style.a9bd9622.css" as="style">
    <script type="module" src="/personalBlogs/assets/app.98eb18df.js"></script>
    <link rel="preload" href="/personalBlogs/assets/inter-roman-latin.2ed14f66.woff2" as="font" type="font/woff2" crossorigin="">
  <link rel="modulepreload" href="/personalBlogs/assets/chunks/framework.255dec5c.js">
  <link rel="modulepreload" href="/personalBlogs/assets/chunks/theme.0f95c3ee.js">
  <link rel="modulepreload" href="/personalBlogs/assets/blogs_Three.js 性能优化和实践建议.md.106f443f.lean.js">
  <link rel="icon" href="logo.png">
  <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-b2cf3e0b><!--[--><!--]--><!--[--><span tabindex="-1" data-v-c8616af1></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-c8616af1> Skip to content </a><!--]--><!----><header class="VPNav" data-v-b2cf3e0b data-v-7e5bc4a5><div class="VPNavBar has-sidebar" data-v-7e5bc4a5 data-v-1d30fa41><div class="container" data-v-1d30fa41><div class="title" data-v-1d30fa41><div class="VPNavBarTitle has-sidebar" data-v-1d30fa41 data-v-f4ef19a3><a class="title" href="/personalBlogs/" data-v-f4ef19a3><!--[--><!--]--><!--[--><img class="VPImage logo" src="/personalBlogs/logo.png" alt data-v-6db2186b><!--]--><!--[-->小江的网站<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-1d30fa41><div class="curtain" data-v-1d30fa41></div><div class="content-body" data-v-1d30fa41><!--[--><!--]--><!----><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-1d30fa41 data-v-7f418b0f><span id="main-nav-aria-label" class="visually-hidden" data-v-7f418b0f>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/personalBlogs/blogs/" tabindex="0" data-v-7f418b0f data-v-37adc828 data-v-8f4dc553><!--[-->我的博客<!--]--><!----></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-1d30fa41 data-v-f6a63727><label title="toggle dark mode" data-v-f6a63727 data-v-a9c8afb8><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-checked="false" data-v-a9c8afb8 data-v-f3c41672><span class="check" data-v-f3c41672><span class="icon" data-v-f3c41672><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-a9c8afb8><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-a9c8afb8><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></label></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-1d30fa41 data-v-0394ad82 data-v-f6988cfb><!--[--><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-1d30fa41 data-v-40855f84 data-v-764effdf><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-764effdf><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-764effdf><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-764effdf><div class="VPMenu" data-v-764effdf data-v-e7ea1737><!----><!--[--><!--[--><!----><div class="group" data-v-40855f84><div class="item appearance" data-v-40855f84><p class="label" data-v-40855f84>Appearance</p><div class="appearance-action" data-v-40855f84><label title="toggle dark mode" data-v-40855f84 data-v-a9c8afb8><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-checked="false" data-v-a9c8afb8 data-v-f3c41672><span class="check" data-v-f3c41672><span class="icon" data-v-f3c41672><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-a9c8afb8><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-a9c8afb8><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></label></div></div></div><div class="group" data-v-40855f84><div class="item social-links" data-v-40855f84><div class="VPSocialLinks social-links-list" data-v-40855f84 data-v-f6988cfb><!--[--><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-1d30fa41 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav" data-v-b2cf3e0b data-v-f5a2ca58><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-f5a2ca58><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-f5a2ca58><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-f5a2ca58>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-f5a2ca58 data-v-079b16a8><button data-v-079b16a8>Return to top</button><!----></div></div><aside class="VPSidebar" data-v-b2cf3e0b data-v-139a1f1d><div class="curtain" data-v-139a1f1d></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-139a1f1d><span class="visually-hidden" id="sidebar-aria-label" data-v-139a1f1d> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-139a1f1d><section class="VPSidebarItem level-0 has-active" data-v-139a1f1d data-v-c4656e6d><div class="item" role="button" tabindex="0" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><h2 class="text" data-v-c4656e6d>博客目录</h2><!----></div><div class="items" data-v-c4656e6d><!--[--><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>概述</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/%E9%80%92%E5%BD%92%E6%9F%A5%E8%AF%A2name.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>递归查询name</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/%E6%9F%A5%E8%AF%A2%E5%9C%BA%E6%99%AF%E4%B8%AD%E6%A8%A1%E5%9E%8B%E6%95%B0%E6%8D%AE.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>查询场景中模型数据</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/%E5%88%9D%E5%A7%8B%E5%8C%96%E6%A8%A1%E5%9E%8B%E8%A7%86%E8%A7%92.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>初始化模型视角</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/%E6%A8%A1%E5%9E%8B%E7%82%B9%E5%87%BB%E9%AB%98%E4%BA%AE%E6%95%88%E6%9E%9C.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>模型点击高亮效果</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/%E6%A8%A1%E5%9E%8B%E5%AE%9A%E4%BD%8D%E8%81%9A%E7%84%A6.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>模型定位聚焦</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/%E9%80%9A%E8%BF%87%E4%BC%A0%E5%85%A5%E5%8F%82%E6%95%B0%E7%94%9F%E6%88%90%E7%9B%B4%E7%BA%BF+%E6%9B%B2%E7%BA%BF%E7%9A%84%E8%B7%AF%E5%BE%84.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>通过传入参数生成直线</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/%E9%80%9A%E8%BF%87three.path%E7%94%9F%E6%88%90%E6%B5%81%E5%8A%A8%E7%9A%84%E7%AE%AD%E5%A4%B4%E5%AE%9E%E7%8E%B0%E5%85%89%E8%B7%AF%E6%95%88%E6%9E%9C.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>通过three.path生成流动的箭头实现光路效果</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/%E5%BC%82%E6%AD%A5%E5%B9%B6%E5%8F%91%E7%94%9F%E6%88%90%E6%A0%87%E7%AD%BE.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>异步并发生成标签</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/git%E5%8D%8F%E5%90%8C%E5%BC%80%E5%8F%91.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>git协同开发</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/Map%E5%AF%B9%E8%B1%A1%E8%AF%A6%E8%A7%A3.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>Map对象详解</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/Vue%E4%B8%AD%E7%9A%84v-slot%E8%AF%A6%E8%A7%A3%EF%BC%8C%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%8F%92%E6%A7%BD%E5%92%8C%E5%85%B7%E5%90%8D%E6%8F%92%E6%A7%BD.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>Vue中的v-slot详解，作用域插槽和具名插槽</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/NProgress%E6%98%AF%E4%BB%80%E4%B9%88.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>NProgress是什么</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/Vue%E7%BB%84%E4%BB%B6%E4%B8%ADname%E7%9A%84%E4%B8%89%E5%A4%A7%E4%BD%9C%E7%94%A8.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>Vue组件中name的三大作用</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/%E4%BD%BF%E7%94%A8%20vue-router%EF%BC%8C%E9%A1%B5%E9%9D%A2%E5%8A%A0%E8%BD%BD%E5%AE%8C%E6%88%90%E5%90%8E%EF%BC%8C$route%20%E7%9A%84%E5%80%BC%E4%B8%8D%E6%AD%A3%E7%A1%AE.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>使用 vue-router，页面加载完成后，$route 的值不正确</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/new%20Set()%E7%9A%84%E5%9F%BA%E7%A1%80%E7%94%A8%E6%B3%95(ES6).html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>new Set()的基础用法(ES6)</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/JS%E4%B8%ADreduce%E7%9A%84%E7%94%A8%E6%B3%95.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>JS中reduce的用法</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/Promise.all.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>Promise.all</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/JavaScript%20Class%E7%B1%BB%E8%AF%A6%E8%A7%A3.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>JavaScript Class类详解</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/%E6%9C%89%E4%BA%86for%E5%BE%AA%E7%8E%AF%20%E4%B8%BA%E4%BB%80%E4%B9%88%E8%BF%98%E8%A6%81forEach%EF%BC%9F.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>有了for循环 为什么还要forEach？</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/tween.js%20%E4%B8%AD%E6%96%87%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>tween.js 中文使用指南</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/%E5%A4%A7%E5%B1%8F%E9%80%82%E9%85%8D%E6%96%B9%E6%A1%88%E6%B1%87%E6%80%BB.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>大屏适配方案汇总</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/%E5%88%9B%E5%BB%BA%E6%96%87%E6%9C%AC%E6%A0%87%E7%AD%BE.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>创建文本标签</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/%E5%B0%81%E8%A3%85websocket%E6%96%B9%E6%B3%95.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>封装websocket方法</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/%E5%89%8D%E7%AB%AF%E5%BC%82%E6%AD%A5(async)%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88(%E6%89%80%E6%9C%89%E6%96%B9%E6%A1%88).html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>前端异步(async)解决方案(所有方案)</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/%E5%85%B3%E4%BA%8Ethree.js%E6%B8%B2%E6%9F%93%E5%99%A8THREE.WebGLRenderer()%E5%8F%82%E6%95%B0%E7%9A%84%E4%BB%8B%E7%BB%8D%E5%92%8C%E4%BD%BF%E7%94%A8.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>关于three.js渲染器THREE.WebGLRenderer()参数的介绍和使用</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/threejs%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8D%95%E5%85%A8%E6%99%AF%E7%9C%8B%E6%88%BFdemo%F0%9F%98%9C.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>threejs实现简单全景看房demo😜</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/ES6%20Module%20%E6%A8%A1%E5%9D%97.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>ES6 Module 模块</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/%E6%B5%8F%E8%A7%88%E5%99%A8%E7%9A%84%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>浏览器的垃圾回收机制</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link is-active has-active" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/Three.js%20%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%92%8C%E5%AE%9E%E8%B7%B5%E5%BB%BA%E8%AE%AE.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>Three.js 性能优化和实践建议</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/Threejs%20logarithmicDepthBuffer%20%E5%BC%80%E5%90%AF%E5%90%8E%20ShaderMaterial%20%E4%BC%9A%E8%A2%AB%E6%A8%A1%E5%9E%8B%E9%81%AE%E6%8C%A1%E9%97%AE%E9%A2%98.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>Threejs logarithmicDepthBuffer 开启后 ShaderMaterial 会被模型遮挡问题</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/personalBlogs/blogs/more.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>更多</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-b2cf3e0b data-v-a494bd1d><div class="VPDoc has-sidebar has-aside" data-v-a494bd1d data-v-c4b0d3cf><!--[--><!--]--><div class="container" data-v-c4b0d3cf><div class="aside" data-v-c4b0d3cf><div class="aside-curtain" data-v-c4b0d3cf></div><div class="aside-container" data-v-c4b0d3cf><div class="aside-content" data-v-c4b0d3cf><div class="VPDocAside" data-v-c4b0d3cf data-v-3f215769><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" data-v-3f215769 data-v-ff0f39c8><div class="content" data-v-ff0f39c8><div class="outline-marker" data-v-ff0f39c8></div><div class="outline-title" data-v-ff0f39c8>章节导航</div><nav aria-labelledby="doc-outline-aria-label" data-v-ff0f39c8><span class="visually-hidden" id="doc-outline-aria-label" data-v-ff0f39c8> Table of Contents for current page </span><ul class="root" data-v-ff0f39c8 data-v-8f12e865><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-c4b0d3cf><div class="content-container" data-v-c4b0d3cf><!--[--><!--]--><!----><main class="main" data-v-c4b0d3cf><div style="position:relative;" class="vp-doc _personalBlogs_blogs_Three_js%20%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%92%8C%E5%AE%9E%E8%B7%B5%E5%BB%BA%E8%AE%AE" data-v-c4b0d3cf><div><p>Three.js 是一个功能强大的 3D 引擎，用于创建 WebGL 应用。尽管它功能强大，但在复杂的 3D 场景中保持高性能是一个挑战。本文将分享一些在使用 Three.js 时的性能优化提示，帮助你提高应用的运行效率。</p><ol><li>使用 <code>stats.js</code> 监视性能</li></ol><hr><p>在进行任何优化之前，首先要监视应用的性能。<code>stats.js</code> 是一个简单而有效的工具，可以帮助你实时监视帧率（FPS）、每帧渲染所需时间（MS）和内存使用情况（MB）。</p><p>然后，可以在 Three.js 项目中使用它：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">import Stats from &#39;three/examples/jsm/libs/stats.module.js&#39;;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">const stats = new Stats();</span></span>
<span class="line"><span style="color:#A6ACCD;">stats.showPanel(0); // 显示面板 0: fps, 1: ms, 2: mb, 3+: custom</span></span>
<span class="line"><span style="color:#A6ACCD;">document.body.appendChild(stats.dom);</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">const tick = () =&gt; {</span></span>
<span class="line"><span style="color:#A6ACCD;">  stats.begin();</span></span>
<span class="line"><span style="color:#A6ACCD;">  // 监视的代码放在这里 或者可以使用stats.update()</span></span>
<span class="line"><span style="color:#A6ACCD;">  stats.end();</span></span>
<span class="line"><span style="color:#A6ACCD;">  requestAnimationFrame(tick);</span></span>
<span class="line"><span style="color:#A6ACCD;">};</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">requestAnimationFrame(tick);</span></span></code></pre></div><p><strong>FPS</strong>：在最后一秒内渲染的帧数。数值越高越好。</p><p><strong>MS</strong>：渲染一帧所需的毫秒数。数值越低越好。</p><p><strong>MB</strong>：分配的内存大小（以兆字节为单位）。需要在 Chrome 中使用 <code>--enable-precise-memory-info</code> 启动。</p><p><strong>CUSTOM</strong>：用户自定义面板支持。</p><p><img src="/personalBlogs/assets/1724057222261.ff734d04.png" alt="1724057222261"></p><ol start="2"><li>优化几何体和材质</li></ol><hr><p>复杂的几何体和高分辨率的材质会显著影响渲染性能。以下是一些优化建议：</p><p><strong>降低几何体细节</strong></p><p>使用 <code>THREE.LOD</code>（Level of Detail）类来根据摄像机距离动态切换几何体细节。</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">import * as THREE from &#39;three&#39;;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">// 创建场景和相机</span></span>
<span class="line"><span style="color:#A6ACCD;">const scene = new THREE.Scene();</span></span>
<span class="line"><span style="color:#A6ACCD;">const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);</span></span>
<span class="line"><span style="color:#A6ACCD;">camera.position.z = 10;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">// 创建渲染器</span></span>
<span class="line"><span style="color:#A6ACCD;">const renderer = new THREE.WebGLRenderer({</span></span>
<span class="line"><span style="color:#A6ACCD;">  antialias: true,</span></span>
<span class="line"><span style="color:#A6ACCD;">  powerPreference: &#39;high-performance&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">});</span></span>
<span class="line"><span style="color:#A6ACCD;">renderer.setSize(window.innerWidth, window.innerHeight);</span></span>
<span class="line"><span style="color:#A6ACCD;">renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));</span></span>
<span class="line"><span style="color:#A6ACCD;">document.body.appendChild(renderer.domElement);</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">// 创建不同细节级别的几何体</span></span>
<span class="line"><span style="color:#A6ACCD;">const highDetailGeometry = new THREE.BoxGeometry(1, 1, 1, 32, 32, 32);</span></span>
<span class="line"><span style="color:#A6ACCD;">const mediumDetailGeometry = new THREE.BoxGeometry(1, 1, 1, 16, 16, 16);</span></span>
<span class="line"><span style="color:#A6ACCD;">const lowDetailGeometry = new THREE.BoxGeometry(1, 1, 1, 8, 8, 8);</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">const material = new THREE.MeshBasicMaterial({ color: 0x00ff00 });</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">// 使用 LOD 动态切换几何体</span></span>
<span class="line"><span style="color:#A6ACCD;">const lod = new THREE.LOD();</span></span>
<span class="line"><span style="color:#A6ACCD;">lod.addLevel(new THREE.Mesh(highDetailGeometry, material), 0);</span></span>
<span class="line"><span style="color:#A6ACCD;">lod.addLevel(new THREE.Mesh(mediumDetailGeometry, material), 5);</span></span>
<span class="line"><span style="color:#A6ACCD;">lod.addLevel(new THREE.Mesh(lowDetailGeometry, material), 10);</span></span>
<span class="line"><span style="color:#A6ACCD;">scene.add(lod);</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">// 动画循环</span></span>
<span class="line"><span style="color:#A6ACCD;">const animate = function () {</span></span>
<span class="line"><span style="color:#A6ACCD;">  requestAnimationFrame(animate);</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">  // 旋转 LOD</span></span>
<span class="line"><span style="color:#A6ACCD;">  lod.rotation.x += 0.01;</span></span>
<span class="line"><span style="color:#A6ACCD;">  lod.rotation.y += 0.01;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">  // 更新摄像机位置</span></span>
<span class="line"><span style="color:#A6ACCD;">  camera.position.x = Math.sin(Date.now() * 0.001) * 20;</span></span>
<span class="line"><span style="color:#A6ACCD;">  camera.position.z = Math.cos(Date.now() * 0.001) * 20;</span></span>
<span class="line"><span style="color:#A6ACCD;">  camera.lookAt(scene.position);</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">  // 渲染场景和相机</span></span>
<span class="line"><span style="color:#A6ACCD;">  renderer.render(scene, camera);</span></span>
<span class="line"><span style="color:#A6ACCD;">};</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">animate();</span></span></code></pre></div><p><strong>使用压缩纹理</strong></p><p>使用压缩纹理格式（如 DDS、KTX2）来减少内存占用和加载时间。这里以 <code>KTX2</code> 为例。</p><p>首先，安装 <code>three/examples/jsm/loaders/KTX2Loader.js</code> 和 <code>Basisu</code> 解码器，然后，在你的项目中使用 <code>KTX2Loader</code> 加载压缩纹理：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">import { KTX2Loader } from &#39;three/examples/jsm/loaders/KTX2Loader.js&#39;;</span></span>
<span class="line"><span style="color:#A6ACCD;">import { MeshStandardMaterial } from &#39;three&#39;;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">// 创建 KTX2Loader</span></span>
<span class="line"><span style="color:#A6ACCD;">const ktx2Loader = new KTX2Loader()</span></span>
<span class="line"><span style="color:#A6ACCD;">  .setTranscoderPath(&#39;path/to/basisu/transcoder/&#39;) // 设置 Basisu 解码器路径</span></span>
<span class="line"><span style="color:#A6ACCD;">  .detectSupport(renderer);</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">// 加载 KTX2 压缩纹理</span></span>
<span class="line"><span style="color:#A6ACCD;">ktx2Loader.load(&#39;path/to/texture.ktx2&#39;, (texture) =&gt; {</span></span>
<span class="line"><span style="color:#A6ACCD;">  const material = new MeshStandardMaterial({ map: texture });</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">  const geometry = new THREE.BoxGeometry(1, 1, 1);</span></span>
<span class="line"><span style="color:#A6ACCD;">  const mesh = new THREE.Mesh(geometry, material);</span></span>
<span class="line"><span style="color:#A6ACCD;">  scene.add(mesh);</span></span>
<span class="line"><span style="color:#A6ACCD;">});</span></span></code></pre></div><p><strong>合并几何体</strong></p><p>将多个几何体合并为一个几何体，以减少绘制调用（draw call）的次数。使用 <code>BufferGeometryUtils</code> 合并几何体。</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">import { BufferGeometryUtils } from &#39;three/examples/jsm/utils/BufferGeometryUtils.js&#39;;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">// 创建多个几何体</span></span>
<span class="line"><span style="color:#A6ACCD;">const geometries = [];</span></span>
<span class="line"><span style="color:#A6ACCD;">for (let i = 0; i &lt; 50; i++) {</span></span>
<span class="line"><span style="color:#A6ACCD;">  const geometry = new THREE.BoxGeometry(0.5, 0.5, 0.5);</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">  geometry.translate(</span></span>
<span class="line"><span style="color:#A6ACCD;">    (Math.random() - 0.5) * 10,</span></span>
<span class="line"><span style="color:#A6ACCD;">    (Math.random() - 0.5) * 10,</span></span>
<span class="line"><span style="color:#A6ACCD;">    (Math.random() - 0.5) * 10</span></span>
<span class="line"><span style="color:#A6ACCD;">  );</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">  geometries.push(geometry);</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">// 合并几何体</span></span>
<span class="line"><span style="color:#A6ACCD;">const mergedGeometry = BufferGeometryUtils.mergeBufferGeometries(geometries);</span></span>
<span class="line"><span style="color:#A6ACCD;">const material = new THREE.MeshBasicMaterial({ color: 0x00ff00 });</span></span>
<span class="line"><span style="color:#A6ACCD;">const mesh = new THREE.Mesh(mergedGeometry, material);</span></span>
<span class="line"><span style="color:#A6ACCD;">scene.add(mesh);</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">// 动画循环</span></span>
<span class="line"><span style="color:#A6ACCD;">const animate = function () {</span></span>
<span class="line"><span style="color:#A6ACCD;">  requestAnimationFrame(animate);</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">  // 旋转合并后的几何体</span></span>
<span class="line"><span style="color:#A6ACCD;">  mesh.rotation.x += 0.01;</span></span>
<span class="line"><span style="color:#A6ACCD;">  mesh.rotation.y += 0.01;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">  // 渲染场景和相机</span></span>
<span class="line"><span style="color:#A6ACCD;">  renderer.render(scene, camera);</span></span>
<span class="line"><span style="color:#A6ACCD;">};</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">animate();</span></span></code></pre></div><ol start="3"><li>优化灯光和阴影</li></ol><hr><p>灯光和阴影计算开销较大，特别是多光源和动态阴影。以下是一些优化建议：</p><ul><li><strong>减少光源数量</strong>：尽量减少场景中的光源数量，选择性能开销较小的光源如 AmbientLight 和 DirectionalLight。</li><li><strong>优化阴影贴图</strong>：降低阴影贴图的分辨率，并限制阴影相机的视野范围，以减少计算开销。</li></ul><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">// 优化阴影贴图</span></span>
<span class="line"><span style="color:#A6ACCD;">directionalLight.shadow.mapSize.width = 1024; // 默认值是 512</span></span>
<span class="line"><span style="color:#A6ACCD;">directionalLight.shadow.mapSize.height = 1024; // 默认值是 512</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">// 限制阴影相机的视野范围</span></span>
<span class="line"><span style="color:#A6ACCD;">directionalLight.shadow.camera.top = 3;</span></span>
<span class="line"><span style="color:#A6ACCD;">directionalLight.shadow.camera.right = 6;</span></span>
<span class="line"><span style="color:#A6ACCD;">directionalLight.shadow.camera.left = -6;</span></span>
<span class="line"><span style="color:#A6ACCD;">directionalLight.shadow.camera.bottom = -3;</span></span>
<span class="line"><span style="color:#A6ACCD;">directionalLight.shadow.camera.near = 0.1;</span></span>
<span class="line"><span style="color:#A6ACCD;">directionalLight.shadow.camera.far = 10;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">// 可选：使用相机助手查看阴影相机的范围</span></span>
<span class="line"><span style="color:#A6ACCD;">const cameraHelper = new THREE.CameraHelper(directionalLight.shadow.camera);</span></span>
<span class="line"><span style="color:#A6ACCD;">scene.add(cameraHelper);</span></span></code></pre></div><ul><li><strong>静态光照贴图</strong>：对于静态场景，可以预先计算光照和阴影，生成光照贴图。这里我们使用 <code>Lightmap</code>，一个 Three.js 的扩展，可以帮助实现静态光照贴图。</li></ul><p>首先，安装 <code>three-lightmap</code>：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">npm install three-lightmap</span></span></code></pre></div><p>然后，在你的项目中使用 <code>three-lightmap</code> 来生成静态光照贴图：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">import { Lightmap } from &#39;three-lightmap&#39;;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">// 创建静态光照贴图</span></span>
<span class="line"><span style="color:#A6ACCD;">const lightmap = new Lightmap(scene, renderer, {</span></span>
<span class="line"><span style="color:#A6ACCD;">  mapSize: 1024,</span></span>
<span class="line"><span style="color:#A6ACCD;">  samples: 4,</span></span>
<span class="line"><span style="color:#A6ACCD;">  bake: true,</span></span>
<span class="line"><span style="color:#A6ACCD;">  exposure: 0.7,</span></span>
<span class="line"><span style="color:#A6ACCD;">  softEdges: 0.01,</span></span>
<span class="line"><span style="color:#A6ACCD;">  aoOnly: false,</span></span>
<span class="line"><span style="color:#A6ACCD;">  aoStrength: 0.6</span></span>
<span class="line"><span style="color:#A6ACCD;">});</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">// 在几何体上启用静态光照贴图</span></span>
<span class="line"><span style="color:#A6ACCD;">cube.material.lightMap = lightmap.generate(cube.geometry);</span></span>
<span class="line"><span style="color:#A6ACCD;">plane.material.lightMap = lightmap.generate(plane.geometry);</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">// 运行一次性光照贴图烘焙过程</span></span>
<span class="line"><span style="color:#A6ACCD;">lightmap.bake();</span></span></code></pre></div><ol start="4"><li>纹理贴图</li></ol><hr><p>纹理贴图非常消耗 GPU 内存，以下是一些优化建议：</p><ul><li><strong>调整尺寸</strong>：调整纹理贴图的分辨率可以通过图像编辑工具（如 Photoshop、GIMP）或编程工具（如 Sharp for Node.js）来实现。在加载纹理时，可以使用 Three.js 内置的 <code>THREE.TextureLoader</code> 来加载已经调整好尺寸的纹理。</li><li><strong>使用正确格式</strong>：确保使用合适的文件格式（如 .jpg 或 .png）。可以使用在线工具如 <a href="https://link.zhihu.com/?target=https%3A//link.juejin.cn/%3Ftarget%3Dhttps%253A%252F%252Ftinypng.com%252F" target="_blank" rel="noreferrer">TinyPNG</a> 来压缩纹理文件，减小文件大小，同时保持较高的视觉质量。</li><li><strong>保持分辨率为 2 的幂次方</strong>：确保纹理尺寸为 2 的幂次方（如 256x256, 512x512, 1024x1024）。如果纹理的尺寸不是 2 的幂次方，Three.js 会自动调整它们，但这会影响性能。</li></ul><ol start="5"><li>使用对象池</li></ol><hr><p>在动画或游戏应用中，经常需要频繁创建和销毁对象。使用对象池可以有效减少内存分配和垃圾回收频繁的开销。</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">class ObjectPool {</span></span>
<span class="line"><span style="color:#A6ACCD;">  constructor(createFunc, size) {</span></span>
<span class="line"><span style="color:#A6ACCD;">    this.createFunc = createFunc;</span></span>
<span class="line"><span style="color:#A6ACCD;">    this.pool = [];</span></span>
<span class="line"><span style="color:#A6ACCD;">    for (let i = 0; i &lt; size; i++) {</span></span>
<span class="line"><span style="color:#A6ACCD;">      this.pool.push(this.createFunc());</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">  get() {</span></span>
<span class="line"><span style="color:#A6ACCD;">    return this.pool.length ? this.pool.pop() : this.createFunc();</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">  release(obj) {</span></span>
<span class="line"><span style="color:#A6ACCD;">    this.pool.push(obj);</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span></code></pre></div><ol start="6"><li>渲染器优化</li></ol><hr><p>以下是一些针对渲染器的优化建议：</p><ul><li><strong>限制像素比</strong>：一些设备有非常高的像素比，但渲染的像素越多，消耗的性能越大。将渲染器的像素比限制为 2：renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));</li><li><strong>配置偏好</strong>：指定 <code>powerPreference</code> 属性来提示用户代理适当的 GPU 配置：const renderer = new THREE.WebGLRenderer({powerPreference: &#39;high-performance&#39;});</li><li><strong>抗锯齿</strong>：只有在有明显锯齿且不会显著影响性能时才启用抗锯齿。 / 创建渲染器时启用抗锯齿 const renderer = new THREE.WebGLRenderer({ canvas: document.querySelector(&#39;#canvas&#39;), antialias: true, // 启用抗锯齿 powerPreference: &#39;high-performance&#39; // 提示浏览器选择高性能的 GPU });</li></ul><ol start="7"><li>相机优化</li></ol><hr><p>通过缩小相机的视野范围（FOV）以及调整相机的 <code>near</code> 和 <code>far</code> 属性，可以显著减少渲染的对象数量，从而提高渲染性能。下面是具体的实现代码和逻辑说明。</p><p><strong>缩小相机的视野范围</strong></p><p>通过减少相机的视野角度（FOV），可以让屏幕中显示的对象更少，从而减少需要渲染的三角形数量。</p><p><strong>调整相机的近端面和远端面</strong></p><p>调整相机的 <code>near</code> 和 <code>far</code> 属性，可以确保只渲染特定范围内的对象，避免渲染不必要的远距离对象。</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">// 调整相机的视野角度和近端面、远端面</span></span>
<span class="line"><span style="color:#A6ACCD;">const fov = 50; // 缩小视野角度（默认值通常为75）</span></span>
<span class="line"><span style="color:#A6ACCD;">const aspect = window.innerWidth / window.innerHeight;</span></span>
<span class="line"><span style="color:#A6ACCD;">const near = 1; // 将 near 属性从 0.1 增大到 1</span></span>
<span class="line"><span style="color:#A6ACCD;">const far = 50; // 将 far 属性从 100 缩小到 50</span></span>
<span class="line"><span style="color:#A6ACCD;">const camera = new THREE.PerspectiveCamera(fov, aspect, near, far);</span></span>
<span class="line"><span style="color:#A6ACCD;">camera.position.z = 10;</span></span></code></pre></div><ol start="8"><li>清除不必要的对象</li></ol><hr><p>当场景中不再需要某个对象时，及时清除它：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">// 创建示例对象</span></span>
<span class="line"><span style="color:#A6ACCD;">const geometry = new THREE.BoxGeometry();</span></span>
<span class="line"><span style="color:#A6ACCD;">const material = new THREE.MeshBasicMaterial({ color: 0x00ff00 });</span></span>
<span class="line"><span style="color:#A6ACCD;">const cube = new THREE.Mesh(geometry, material);</span></span>
<span class="line"><span style="color:#A6ACCD;">scene.add(cube);</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">// 在某个时刻移除对象</span></span>
<span class="line"><span style="color:#A6ACCD;">function removeObject(object) {</span></span>
<span class="line"><span style="color:#A6ACCD;">  // 移除对象</span></span>
<span class="line"><span style="color:#A6ACCD;">  scene.remove(object);</span></span>
<span class="line"><span style="color:#A6ACCD;">  // 释放几何体资源</span></span>
<span class="line"><span style="color:#A6ACCD;">  if (object.geometry) {</span></span>
<span class="line"><span style="color:#A6ACCD;">    object.geometry.dispose();</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"><span style="color:#A6ACCD;">  // 释放材质资源</span></span>
<span class="line"><span style="color:#A6ACCD;">  if (object.material) {</span></span>
<span class="line"><span style="color:#A6ACCD;">    if (Array.isArray(object.material)) {</span></span>
<span class="line"><span style="color:#A6ACCD;">      // 如果材质是数组，遍历并释放每个材质</span></span>
<span class="line"><span style="color:#A6ACCD;">      object.material.forEach((material) =&gt; {</span></span>
<span class="line"><span style="color:#A6ACCD;">        material.dispose();</span></span>
<span class="line"><span style="color:#A6ACCD;">      });</span></span>
<span class="line"><span style="color:#A6ACCD;">    } else {</span></span>
<span class="line"><span style="color:#A6ACCD;">      // 单一材质，直接释放</span></span>
<span class="line"><span style="color:#A6ACCD;">      object.material.dispose();</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"><span style="color:#A6ACCD;">  // 释放纹理资源</span></span>
<span class="line"><span style="color:#A6ACCD;">  if (object.material.map) {</span></span>
<span class="line"><span style="color:#A6ACCD;">    object.material.map.dispose();</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">// 在某个时刻调用函数移除对象</span></span>
<span class="line"><span style="color:#A6ACCD;">removeObject(cube);</span></span></code></pre></div><ol start="9"><li>后期处理和着色器优化</li></ol><hr><p><strong>限制后期处理通道</strong></p><p>每个后期处理过程都会增加渲染负担，尽量减少不必要的后期处理步骤。</p><p><strong>着色器优化</strong></p><ul><li><strong>指定精度</strong>：强制材质中着色器的精度：js复制代码 const shaderMaterial = new THREE.ShaderMaterial({precision: &#39;lowp&#39;});</li><li><strong>保持代码简单</strong>：尽量保持着色器代码简单，避免复杂的逻辑和多层嵌套。</li><li><strong>使用贴图纹理</strong>：尽量使用纹理来代替复杂的计算，例如噪声生成。</li><li><strong>使用 defines</strong>：对于不会改变的值，使用 <code>defines</code> 而不是 <code>uniform</code>： js 复制代码 const shaderMaterial = new THREE.ShaderMaterial({ defines: {uDisplacementStrength: 1.5}, });</li></ul><p>性能优化是一个持续的过程，需要根据具体的应用场景进行调整。以上提示可以帮助你在使用 Three.js 构建 3D 应用时提高性能。希望本文对你有所帮助！</p></div></div></main><footer class="VPDocFooter" data-v-c4b0d3cf data-v-face870a><!--[--><!--]--><!----><div class="prev-next" data-v-face870a><div class="pager" data-v-face870a><a class="pager-link prev" href="/personalBlogs/blogs/%E6%B5%8F%E8%A7%88%E5%99%A8%E7%9A%84%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6.html" data-v-face870a><span class="desc" data-v-face870a>←上一篇</span><span class="title" data-v-face870a>浏览器的垃圾回收机制</span></a></div><div class="has-prev pager" data-v-face870a><a class="pager-link next" href="/personalBlogs/blogs/Threejs%20logarithmicDepthBuffer%20%E5%BC%80%E5%90%AF%E5%90%8E%20ShaderMaterial%20%E4%BC%9A%E8%A2%AB%E6%A8%A1%E5%9E%8B%E9%81%AE%E6%8C%A1%E9%97%AE%E9%A2%98.html" data-v-face870a><span class="desc" data-v-face870a>下一篇→</span><span class="title" data-v-face870a>Threejs logarithmicDepthBuffer 开启后 ShaderMaterial 会被模型遮挡问题</span></a></div></div></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-b2cf3e0b data-v-2f86ebd2><div class="container" data-v-2f86ebd2><!----><p class="copyright" data-v-2f86ebd2>Copyright © 2023 JIANG</p></div></footer><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"blogs_index.md\":\"cd9b4dd0\",\"blogs_tween.js 中文使用指南.md\":\"835f0b0d\",\"blogs_git协同开发.md\":\"be0b65b3\",\"blogs_promise.all.md\":\"594ffea2\",\"blogs_more.md\":\"9a2706e7\",\"blogs_map对象详解.md\":\"3fef813d\",\"blogs_threejs实现简单全景看房demo😜.md\":\"8b4f1ac4\",\"blogs_js中reduce的用法.md\":\"6614fd96\",\"blogs_vue中的v-slot详解，作用域插槽和具名插槽.md\":\"9ed78544\",\"blogs_nprogress是什么.md\":\"e562c118\",\"blogs_vue组件中name的三大作用.md\":\"94b1760a\",\"blogs_new set()的基础用法(es6).md\":\"7acbea17\",\"blogs_es6 module 模块.md\":\"3c47d71b\",\"blogs_threejs logarithmicdepthbuffer 开启后 shadermaterial 会被模型遮挡问题.md\":\"83a61416\",\"blogs_three.js 性能优化和实践建议.md\":\"106f443f\",\"blogs_javascript class类详解.md\":\"5b5afbc3\",\"blogs_初始化模型视角.md\":\"7e8bb4e5\",\"blogs_创建文本标签.md\":\"347c44c2\",\"blogs_关于three.js渲染器three.webglrenderer()参数的介绍和使用.md\":\"d9af0403\",\"blogs_使用 vue-router，页面加载完成后，_route 的值不正确.md\":\"7cfa5e05\",\"blogs_封装websocket方法.md\":\"3b820615\",\"blogs_开发规范初版.md\":\"3f538129\",\"blogs_浏览器的垃圾回收机制.md\":\"beff4284\",\"blogs_有了for循环 为什么还要foreach？.md\":\"9dd1d08b\",\"blogs_模型定位聚焦.md\":\"db61e41d\",\"blogs_模型点击高亮效果.md\":\"df6368e5\",\"blogs_递归查询name.md\":\"83fb1471\",\"blogs_通过传入参数生成直线_曲线的路径.md\":\"1ab13c17\",\"blogs_查询场景中模型数据.md\":\"d659c061\",\"blogs_通过three.path生成流动的箭头实现光路效果.md\":\"0959eaf8\",\"blogs_异步并发生成标签.md\":\"2ccf6358\",\"blogs_大屏适配方案汇总.md\":\"08819943\",\"index.md\":\"c36bb269\",\"blogs_前端异步(async)解决方案(所有方案).md\":\"c08f3f4e\"}")
__VP_SITE_DATA__ = JSON.parse("{\"lang\":\"zh-CN\",\"dir\":\"ltr\",\"title\":\"小江的网站\",\"description\":\"个人博客网\",\"base\":\"/personalBlogs/\",\"head\":[],\"appearance\":true,\"themeConfig\":{\"logo\":\"logo.png\",\"siteTitle\":\"小江的网站\",\"smoothScroll\":true,\"socialLinks\":[],\"nav\":[{\"text\":\"我的博客\",\"link\":\"/blogs/\"}],\"sidebar\":{\"/blogs/\":[{\"text\":\"博客目录\",\"collapsible\":true,\"items\":[{\"text\":\"概述\",\"link\":\"/blogs/\"},{\"text\":\"递归查询name\",\"link\":\"/blogs/递归查询name\"},{\"text\":\"查询场景中模型数据\",\"link\":\"/blogs/查询场景中模型数据\"},{\"text\":\"初始化模型视角\",\"link\":\"/blogs/初始化模型视角\"},{\"text\":\"模型点击高亮效果\",\"link\":\"/blogs/模型点击高亮效果\"},{\"text\":\"模型定位聚焦\",\"link\":\"/blogs/模型定位聚焦\"},{\"text\":\"通过传入参数生成直线\",\"link\":\"/blogs/通过传入参数生成直线+曲线的路径\"},{\"text\":\"通过three.path生成流动的箭头实现光路效果\",\"link\":\"/blogs/通过three.path生成流动的箭头实现光路效果\"},{\"text\":\"异步并发生成标签\",\"link\":\"/blogs/异步并发生成标签\"},{\"text\":\"git协同开发\",\"link\":\"/blogs/git协同开发\"},{\"text\":\"Map对象详解\",\"link\":\"/blogs/Map对象详解\"},{\"text\":\"Vue中的v-slot详解，作用域插槽和具名插槽\",\"link\":\"/blogs/Vue中的v-slot详解，作用域插槽和具名插槽\"},{\"text\":\"NProgress是什么\",\"link\":\"/blogs/NProgress是什么\"},{\"text\":\"Vue组件中name的三大作用\",\"link\":\"/blogs/Vue组件中name的三大作用\"},{\"text\":\"使用 vue-router，页面加载完成后，$route 的值不正确\",\"link\":\"/blogs/使用 vue-router，页面加载完成后，$route 的值不正确\"},{\"text\":\"new Set()的基础用法(ES6)\",\"link\":\"/blogs/new Set()的基础用法(ES6)\"},{\"text\":\"JS中reduce的用法\",\"link\":\"/blogs/JS中reduce的用法\"},{\"text\":\"Promise.all\",\"link\":\"/blogs/Promise.all\"},{\"text\":\"JavaScript Class类详解\",\"link\":\"/blogs/JavaScript Class类详解\"},{\"text\":\"有了for循环 为什么还要forEach？\",\"link\":\"/blogs/有了for循环 为什么还要forEach？\"},{\"text\":\"tween.js 中文使用指南\",\"link\":\"/blogs/tween.js 中文使用指南\"},{\"text\":\"大屏适配方案汇总\",\"link\":\"/blogs/大屏适配方案汇总\"},{\"text\":\"创建文本标签\",\"link\":\"/blogs/创建文本标签\"},{\"text\":\"封装websocket方法\",\"link\":\"/blogs/封装websocket方法\"},{\"text\":\"前端异步(async)解决方案(所有方案)\",\"link\":\"/blogs/前端异步(async)解决方案(所有方案)\"},{\"text\":\"关于three.js渲染器THREE.WebGLRenderer()参数的介绍和使用\",\"link\":\"/blogs/关于three.js渲染器THREE.WebGLRenderer()参数的介绍和使用\"},{\"text\":\"threejs实现简单全景看房demo😜\",\"link\":\"/blogs/threejs实现简单全景看房demo😜\"},{\"text\":\"ES6 Module 模块\",\"link\":\"/blogs/ES6 Module 模块\"},{\"text\":\"浏览器的垃圾回收机制\",\"link\":\"/blogs/浏览器的垃圾回收机制\"},{\"text\":\"Three.js 性能优化和实践建议\",\"link\":\"/blogs/Three.js 性能优化和实践建议\"},{\"text\":\"Threejs logarithmicDepthBuffer 开启后 ShaderMaterial 会被模型遮挡问题\",\"link\":\"/blogs/Threejs logarithmicDepthBuffer 开启后 ShaderMaterial 会被模型遮挡问题\"},{\"text\":\"更多\",\"link\":\"/blogs/more\"}]}]},\"outline\":\"deep\",\"outlineTitle\":\"章节导航\",\"docFooter\":{\"prev\":\"←上一篇\",\"next\":\"下一篇→\"},\"lastUpdatedText\":\"上次更新时间\",\"footer\":{\"message\":\"\",\"copyright\":\"Copyright © 2023 JIANG\"}},\"locales\":{},\"scrollOffset\":90,\"cleanUrls\":false}")</script>
    
  </body>
</html>